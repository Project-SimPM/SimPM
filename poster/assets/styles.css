@font-face{
  font-family:"Cascadia Code";
  src:local("Cascadia Code"),
      url("../fonts/CascadiaCode/woff2/CascadiaCode.woff2") format("woff2"),
      url("../fonts/CascadiaCode/ttf/CascadiaCode.ttf") format("truetype");
  font-weight:400;
  font-style:normal;
  font-display:swap;
}

@font-face{
  font-family:"Cascadia Code";
  src:local("Cascadia Code Italic"),
      url("../fonts/CascadiaCode/woff2/CascadiaCodeItalic.woff2") format("woff2"),
      url("../fonts/CascadiaCode/ttf/CascadiaCodeItalic.ttf") format("truetype");
  font-weight:400;
  font-style:italic;
  font-display:swap;
}

:root{
  --bg:#0b1220;
  --panel:#0f1a2e;
  --panel2:#0c1628;
  --text:#e7eefc;
  --muted:#a9b7d6;
  --accent:#79c6ff;
  --accent2:#8df3c5;
  --border:rgba(231,238,252,.12);
  --mono:"Cascadia Code","Cascadia Mono","Vazirmatn",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

  --nav-bg:rgba(11,18,32,.78);
  --badge-bg:rgba(15,26,46,.6);
  --navlink-bg:rgba(15,26,46,.5);
  --btn-border:rgba(121,198,255,.35);
  --btn-bg:rgba(121,198,255,.12);
  --btn-bg-hover:rgba(121,198,255,.18);

  --panel-bg:linear-gradient(180deg, rgba(15,26,46,.72), rgba(12,22,40,.62));
  --card-bg:rgba(11,18,32,.35);
  --surface-bg:rgba(11,18,32,.25);
  --logo-bg:rgba(255,255,255,.06);
  --img-bg:rgba(255,255,255,.05);

  --lightbox-card-border:rgba(231,238,252,.18);
  --lightbox-card-bg:rgba(11,18,32,.96);
  --lightbox-img-bg:rgba(255,255,255,.03);
}

html{color-scheme:dark}

html[data-theme="light"]{color-scheme:light}

html[data-theme="light"]:root{
  --bg:#f6f8fc;
  --panel:#ffffff;
  --panel2:#f1f4fb;
  --text:#0f172a;
  --muted:#475569;
  --accent:#0b5bd3;
  --accent2:#0f9d6a;
  --border:rgba(15,23,42,.14);

  --nav-bg:rgba(246,248,252,.86);
  --badge-bg:rgba(241,244,251,.85);
  --navlink-bg:rgba(241,244,251,.85);
  --btn-border:rgba(11,91,211,.45);
  --btn-bg:rgba(11,91,211,.10);
  --btn-bg-hover:rgba(11,91,211,.14);

  --panel-bg:linear-gradient(180deg, rgba(255,255,255,.92), rgba(241,244,251,.92));
  --card-bg:rgba(255,255,255,.80);
  --surface-bg:rgba(241,244,251,.82);
  --logo-bg:rgba(15,23,42,.04);
  --img-bg:rgba(15,23,42,.03);

  --lightbox-card-border:rgba(15,23,42,.18);
  --lightbox-card-bg:#ffffff;
  --lightbox-img-bg:rgba(15,23,42,.03);
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}

body{
  margin:0;
  font-family:inherit;
  background:radial-gradient(1200px 800px at 20% 0%, rgba(121,198,255,.18), transparent 60%),
             radial-gradient(900px 700px at 90% 10%, rgba(141,243,197,.12), transparent 55%),
             var(--bg);
  color:var(--text);
}

html[data-lang="fa"]{
  font-family:"Vazirmatn",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
}

/* In Persian (RTL) mode, keep diagrams LTR (diagrams stay English). */
html[data-lang="fa"] .figureBtn .thumb,
html[data-lang="fa"] .lightboxSvg{
  direction:ltr;
  text-align:left;
}

button, input, select, textarea{font:inherit}

a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}

.container{max-width:1200px;margin:0 auto;padding:0 20px}

.kicker{color:var(--muted);font-size:12px}
.brandName{font-weight:600}

.header{padding:26px 0 16px}
.headerTop{display:flex;gap:16px;align-items:center;justify-content:space-between}
.brand{display:flex;gap:14px;align-items:center}
.logo{
  height:64px;
  width:auto;
  object-fit:contain;
  background:var(--logo-bg);
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px;
}
.titleWrap{margin-top:14px}
.h1{font-size:34px;line-height:1.15;margin:0}
.sub{margin:10px 0 0;color:var(--muted);max-width:75ch}

.badges{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
.badge{
  font-size:12px;
  color:var(--muted);
  border:1px solid var(--border);
  background:var(--badge-bg);
  padding:6px 10px;
  border-radius:999px;
}

.nav{
  position:sticky;
  top:0;
  z-index:50;
  -webkit-backdrop-filter:saturate(130%) blur(10px);
  backdrop-filter:saturate(130%) blur(10px);
  background:var(--nav-bg);
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
}
.navInner{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 0}
.navLinks{display:flex;gap:10px;flex-wrap:wrap}
.navLinks a{
  font-size:13px;
  color:var(--text);
  border:1px solid var(--border);
  background:var(--navlink-bg);
  padding:7px 10px;
  border-radius:10px;
}
.navLinks a:hover{border-color:rgba(121,198,255,.35)}

.navActions{display:flex;gap:10px;align-items:center;justify-content:flex-end;flex:0 0 auto}

.btn{
  font-size:13px;
  border:1px solid var(--btn-border);
  background:var(--btn-bg);
  color:var(--text);
  padding:7px 10px;
  border-radius:10px;
  cursor:pointer;
}
.btn:hover{background:var(--btn-bg-hover)}

main{padding:22px 0 80px}

.panel{
  margin-top:18px;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--panel-bg);
  overflow:hidden;
}
.panelHeader{
  padding:16px 18px;
  display:flex;gap:12px;align-items:flex-start;justify-content:space-between;
  border-bottom:1px solid var(--border);
}
.panelHeader h2{margin:0;font-size:18px}
.panelHeader p{margin:6px 0 0;color:var(--muted);max-width:95ch}
.panelBody{padding:18px}

.grid2{display:grid;grid-template-columns:1fr;gap:14px}
@media (min-width: 920px){.grid2{grid-template-columns:1.2fr .8fr}}

.card{
  border:1px solid var(--border);
  background:var(--card-bg);
  border-radius:14px;
  padding:14px;
}
.card h3{margin:0 0 10px;font-size:15px}
.card ul{margin:0;padding-inline-start:18px;color:var(--muted)}
.card li{margin:6px 0}

.inlineCode{
  font-family:var(--mono);
  font-size:.95em;
  padding:1px 6px;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--surface-bg);
  color:var(--text);
  white-space:nowrap;
}

pre.code{
  margin:0;
  border:1px solid var(--border);
  background:var(--surface-bg);
  border-radius:12px;
  padding:12px;
  overflow:auto;
  color:var(--text);
  font-size:12px;
  line-height:1.45;
  font-family:var(--mono);
}

.figureGrid{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:12px}
@media (min-width: 720px){.figureGrid{grid-template-columns:repeat(3, minmax(0, 1fr));}}

.figureBtn{
  border:1px solid var(--border);
  background:var(--surface-bg);
  border-radius:14px;
  padding:10px;
  text-align:start;
  cursor:pointer;
}
.figureBtn:hover{border-color:rgba(121,198,255,.35)}

.figureBtn .thumb{
  width:100%;
  height:150px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--img-bg);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

.figureBtn .thumb svg{
  width:100%;
  height:100%;
  display:block;
}

.figureBtn .codeThumb{
  width:100%;
  height:150px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--img-bg);
  overflow:hidden;
  margin:0;
  padding:0;
  font-size:11px;
  line-height:1.35;
  font-family:var(--mono);
  white-space:pre;
}

.figureBtn .codeThumb code{
  display:block;
  padding:10px;
  height:100%;
}
.figureBtn .codeThumb code.hljs{padding:10px;height:100%;}

.figureBtn .cap{margin-top:8px;font-size:12px;color:var(--muted);line-height:1.35}

.footer{margin-top:18px;color:var(--muted);font-size:12px}
.footerTight{margin-top:14px}

/* Lightbox */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.72);
  display:none;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:100;
}
.lightbox[aria-hidden="false"]{display:flex}
.lightboxCard{
  width:min(1200px, 100%);
  max-height:92vh;
  border:1px solid var(--lightbox-card-border);
  background:var(--lightbox-card-bg);
  border-radius:16px;
  overflow:hidden;
}
.lightboxTop{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  padding:12px 14px;
  border-bottom:1px solid var(--border);
}
.lightboxTop .title{font-size:13px;color:var(--text);opacity:.95}
.lightboxTop .close{
  border:1px solid var(--border);
  background:var(--badge-bg);
  color:var(--text);
  padding:6px 10px;
  border-radius:10px;
  cursor:pointer;
}
.lightboxTop .close:hover{border-color:rgba(121,198,255,.35)}
.lightboxBody{padding:12px}

.lightboxBody img{
  width:100%;
  height:auto;
  max-height:75vh;
  object-fit:contain;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--lightbox-img-bg);
}

.lightboxSvg{
  width:100%;
  max-height:75vh;
  overflow:auto;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--lightbox-img-bg);
  padding:10px;
}

.lightboxSvg svg{width:100%;height:auto;display:block}

.lightboxCode{
  width:100%;
  max-height:75vh;
  overflow:auto;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--lightbox-img-bg);
  padding:0;
  margin:0;
  font-size:12px;
  line-height:1.45;
  font-family:var(--mono);
}

.lightboxCode code{
  display:block;
  padding:12px;
}
.lightboxCode code.hljs{padding:12px;}

.lightboxCaption{margin-top:10px;color:var(--muted);font-size:12px;line-height:1.45}

@media print{
  .nav, .btn, .lightbox{display:none !important}
  body{background:#fff;color:#000}
  .panel{break-inside:avoid}
  .badge{color:#000}
}
